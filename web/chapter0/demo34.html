<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>员工信息</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        .table {
            margin: 0 auto;
            margin-top: 50px;
        }

        .table tr th {
            border: 1px solid black;
            column-gap: 0px;
        }

        .inputBox {
            margin: 0 auto;
            margin-top: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 1px solid black;
            width: 300px;
            padding: 5px;
        }

        .inputBox p {
            padding: 2px;
        }
    </style>
</head>

<body>
    <div>
        <!-- 员工信息表格 -->
        <div>
            <table class="table">
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Salary</th>
                    <th>&nbsp;&nbsp;&nbsp;&nbsp;</th>
                </tr>
                <tr>
                    <th>Tom</th>
                    <th>Tom@163.com</th>
                    <th>5000</th>
                    <th><a href="deleteEmp?id=001">Delete</a></th>
                </tr>
                <tr>
                    <th>Jerry</th>
                    <th>Jerry@163.com</th>
                    <th>8000</th>
                    <th><a href="deleteEmp?id=002">Delete</a></th>
                </tr>
                <tr>
                    <th>Bob</th>
                    <th>Bob@163.com</th>
                    <th>1000</th>
                    <th><a href="deleteEmp?id=003">Delete</a></th>
                </tr>
            </table>
        </div>
        <!-- 添加新员工表单 -->
        <div class="inputBox">
            <h3>添加新员工</h3>
            <p>name:<input type="text" name="name" id="name"></p>
            <p>email:<input type="text" id="email"></p>
            <p>salary:<input type="text" id="salary"></p>
            <p><input type="submit" id="submit"></p>

        </div>
    </div>
    <script>
        function deleteMsg() {
            let allA = document.getElementsByTagName("a");
            for (let i = 0; i < allA.length; i++) {
                allA[i].onclick = function () {
                    let flag = confirm("确认删除吗？");
                    if (flag) {
                        let tr = this.parentNode.parentNode
                        tr.parentNode.removeChild(tr);
                    };
                    return false;
                }
            }
        }
        window.onload = function () {
            /*
             *  点击超链接，删除一个员工信息
             *
             * 
             */
            deleteMsg();
            //获取表单填写的信息
            let submit = document.getElementById("submit");
            submit.onclick = function () {

                let name = document.getElementById("name").value;
                let email = document.getElementById("email").value;
                let salary = document.getElementById("salary").value;
                let tr = document.createElement("tr");
                tr.innerHTML = "<th>" + name + "</th>" +
                    "<th>" + email + "</th>" +
                    "<th>" + salary + "</th>" +
                    "<th>" + a + "</th>";
                let a = tr.getElementsByTagName("a")[0];
                a.onclick = deleteMsg;//有问题
                let table = document.getElementsByTagName("table")[0];
                table.appendChild(tr);
                
            };
        };
    </script>
</body>

</html>